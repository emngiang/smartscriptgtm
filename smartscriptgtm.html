<!DOCTYPE html>
<html>

<head>
    <title>Test Cross-platform SmartScript GTM Site</title>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-PJQ75JSF');</script>
    <!-- End Google Tag Manager -->
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PJQ75JSF" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <h1>Welcome to Test Site</h1>
    <p>This is a simple HTML page to test Cross-platform SmartScript using GTM.</p>

    <!-- Link to be dynamically updated with the URL -->
    <a id="dynamicLinkButton" href="#"
        style="padding: 10px; background-color: #4CAF50; color: white; text-decoration: none;">Click Me</a>

    <!-- Script to update the link with the URL -->
    <script>
        window.onload = function () {
            var link = document.getElementById('dynamicLinkButton');
            var platformKey = 'steam'; // Use the same key used in your GTM script
            var url = window[platformKey + "Result"];

            if (url && url !== "No output from script") {
                link.href = url;
                link.onclick = function () {
                    window.location.href = url;
                    return false; // Prevent default action
                };
            } else {
                // Handle the case where the URL is not available
                console.error("URL for the platform is not available");
                link.href = "#";
                link.onclick = function () { return false; }; // Prevent navigation for empty links
            }
        };
    </script>
</body>

</html>